{% extends "base.html" %}
{% block content %}
<div class="text-center mb-5">
    <h2 class="fw-bold text-gradient">Your Baby Dashboard</h2>
    <p class="text-muted">Select a profile to track health logs</p>
</div>

<div class="row g-4 justify-content-center">
    <!-- Existing Baby Profiles -->
    {% for item in babies %}
    <div class="col-md-4 col-sm-6">
        <a href="#modal-{{ item.obj.id }}" data-bs-toggle="modal" class="text-decoration-none text-dark">
            <div class="baby-card p-4 h-100 d-flex flex-column justify-content-center align-items-center text-center">
                <!-- Icon or Initial -->
                <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-3 fs-3 fw-bold shadow"
                    style="width: 70px; height: 70px;">
                    {{ item.obj.name[0] | upper }}
                </div>
                <h4 class="fw-bold mb-1">{{ item.obj.name }}</h4>
                <p class="text-muted mb-2">{{ item.age_display }}</p>
                <span class="badge bg-info text-dark">{{ item.obj.blood_group }}</span>
            </div>
        </a>
    </div>

    <!-- Modal for Choice: View or Enter Log -->
    <div class="modal fade" id="modal-{{ item.obj.id }}" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content glass-container">
                <div class="modal-header border-0">
                    <h5 class="modal-title fw-bold">Manage {{ item.obj.name }}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center p-4">
                    <p>What would you like to do?</p>
                    <div class="d-grid gap-3">
                        <a href="{{ url_for('enter_log', baby_id=item.obj.id) }}" class="btn btn-primary btn-lg">
                            üìù Enter Health Log
                        </a>
                        <a href="{{ url_for('view_logs', baby_id=item.obj.id) }}"
                            class="btn btn-outline-primary btn-lg">
                            üìä View Past Logs
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}

    <!-- Add New Profile Card -->
    <div class="col-md-4 col-sm-6">
        <a href="{{ url_for('add_baby') }}" class="text-decoration-none">
            <div class="baby-card baby-card-plus h-100 rounded-4">
                <span class="fw-bold">+</span>
            </div>
        </a>
    </div>
</div>
{% endblock %}