{% extends "base.html" %}
{% block content %}
<!-- Hero Section -->
<div class="p-5 mb-5 rounded-3 glass-container text-center position-relative overflow-hidden">
    <div class="position-absolute top-0 start-0 w-100 h-100"
        style="background: linear-gradient(135deg, rgba(66, 135, 245, 0.1), rgba(200, 80, 192, 0.1)); z-index: -1;">
    </div>
    <h1 class="display-4 fw-bold text-gradient mb-3">Hi there, Parent! ğŸ‘‹</h1>
    <p class="lead text-muted mb-4 mx-auto" style="max-width: 600px;">
        Welcome to your personal <strong>BabyMonitor AI</strong>. We help you track vitals and get instant health
        advice.
    </p>

    {% if not babies %}
    <div class="d-flex justify-content-center gap-3">
        <a href="{{ url_for('add_baby') }}" class="btn btn-primary rounded-pill px-5 py-3 shadow-lg fw-bold">
            <span class="fs-5">+ Add Your First Baby</span>
        </a>
    </div>
    {% endif %}
</div>

{% if not babies %}
<!-- How It Works Section (Only shown if no babies or maybe always shown? Let's show if no babies to guide them) -->
<div class="row text-center mb-5">
    <h4 class="text-muted fw-bold mb-4">How it Works</h4>
    <div class="col-md-4 mb-3">
        <div class="p-4">
            <div class="fs-1 mb-3">ğŸ‘¶</div>
            <h5 class="fw-bold">1. Create Profile</h5>
            <p class="text-muted small">Add your baby's details like name and DOB.</p>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="p-4">
            <div class="fs-1 mb-3">ğŸŒ¡ï¸</div>
            <h5 class="fw-bold">2. Log Health</h5>
            <p class="text-muted small">Enter temperature, symptoms, and feed details.</p>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="p-4">
            <div class="fs-1 mb-3">ğŸ¤–</div>
            <h5 class="fw-bold">3. Get AI Analysis</h5>
            <p class="text-muted small">Receive instant risk assessments and advice.</p>
        </div>
    </div>
</div>
{% else %}

<div id="profiles" class="text-center mb-4">
    <h3 class="fw-bold text-gradient">Your Baby Profiles</h3>
    <p class="text-muted small">Tap a card to manage health logs</p>
</div>

<div class="row g-4 justify-content-center">
    <!-- Existing Baby Profiles -->
    {% for item in babies %}
    <div class="col-md-4 col-sm-6">
        <a href="#modal-{{ item.obj.id }}" data-bs-toggle="modal" class="text-decoration-none text-dark">
            <div class="baby-card p-4 h-100 d-flex flex-column justify-content-center align-items-center text-center">
                <!-- Icon or Initial -->
                <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-3 fs-3 fw-bold shadow"
                    style="width: 70px; height: 70px;">
                    {{ item.obj.name[0] | upper }}
                </div>
                <h4 class="fw-bold mb-1">{{ item.obj.name }}</h4>
                <p class="text-muted mb-2">{{ item.age_display }}</p>
                <span class="badge bg-info text-dark">{{ item.obj.blood_group }}</span>
            </div>
        </a>
    </div>

    <!-- Modal for Choice: View or Enter Log -->
    <div class="modal fade" id="modal-{{ item.obj.id }}" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content glass-container">
                <div class="modal-header border-0">
                    <h5 class="modal-title fw-bold">Manage {{ item.obj.name }}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center p-4">
                    <p>What would you like to do?</p>
                    <div class="d-grid gap-3">
                        <a href="{{ url_for('enter_log', baby_id=item.obj.id) }}" class="btn btn-primary btn-lg">
                            ğŸ“ Enter Health Log
                        </a>
                        <a href="{{ url_for('view_logs', baby_id=item.obj.id) }}"
                            class="btn btn-outline-primary btn-lg">
                            ğŸ“Š View Past Logs
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}

    <!-- Add New Profile Card -->
    <div class="col-md-4 col-sm-6">
        <a href="{{ url_for('add_baby') }}" class="text-decoration-none">
            <div class="baby-card baby-card-plus h-100 rounded-4">
                <span class="fw-bold">+</span>
            </div>
        </a>
    </div>
</div>
{% endif %}
{% endblock %}